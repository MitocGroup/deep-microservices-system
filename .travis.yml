language: node_js
sudo: required
node_js:
- '6.10'
- '7.7'
cache:
  edge: true
  directories:
  - $(npm root -g)
  - node_modules
  - deep_modules
  - $(npm config get prefix)/bin
branches:
  only:
  - master
  - dev
  - stage
  - test
before_install:
- cp bin/test/package.json .
after_success:
- npm run coverage
after_script:
- npm run remove-coverage
env:
  global:
  - MAJOR_VERSIONS=master
  - DEEP_NO_INTERACTION=1
  - E2E_TESTING=none
  # JSPM_GITHUB_AUTH_TOKEN=[secure]
  - secure: "qUGOP2Y9/5kQ6MKd2qzJmvNnQHKeCFTV4sCRbNHm64VegYD1hi3Ju57Fru1Rhh9i8WBKZaS/CLTIKGv6vrYAhocH72MKjq8CPHBpNJlue8iD8m9zi1orFBb5OSO9rU/XABDatV2GbVor1hrv7hTZIultmu60EOOKtbqGGqMdrMWoFKXzGaVQvBea3sP7jCWioRJQ9hIKZ9INMwQLnRzsbA/W3IKcaNb1HYeRw21myDge3OeoneCvCC1f+WW4xf1g0W++dCVhVs08blT9J/MIDA4Abv6q5s4c7hDfnNhEX70Qhw5TcwX7Worntf5DnstteG9nBVrV+qT3+avp3dhJZsxocyuOsVgebdRmZsy84WCXLMqVZN5ryhCP/kShuo91OqZqIJqIwHpFXR1iLYpl7YpXP07OrE8BHzxI6MYhaMrWnSgOjenkSQj4GM7VZPv1qDWHPP15sJGokmashUJMV+PDUETOPUViTLGQxJ3nRYpGd+8L8jljoP7jLfuJPY/H6d2VwJNSZ2q6E2MlYXscChLCsW16XTlmWChtiHqXK4Mvr05x3jN8QFeDUSkuwKxgcPZ0cuXvnRmK0UFE4vpNm6PHAaJa9QmmFU/zeXlCzT6FpjoZy0jcSXBUeOPLRdfQQ1HTlK+z29IUKMLCS/FTu0Ks83d5Ga8tSPjg6XzOTVQ="
  # GITHUB_OAUTH_TOKEN=[secure]
  - secure: "1r4TA3SF/q+naafQD+pqgiio0hFGm9vEmP1gZY9c5tgfOz3Qx0fcFPnolJAx5lJ2ZEOfeqehgZozN0oI1plytKxuDu0tVJ8DHsAumnkdKa1TBRIa5feOEfRgpnqT7ps7LKCNXfs5r6TMKwVlgmpMmrYI+4UiGz33EEkG1/vjS4MSgF/DKDLM+xc7HF4sIMRyxXB0l4SIEwBCiREOjbwtVx8HTEy8mIpbUvnYLkJc/w9koUy7vQKWth/Jb5m+unbSimso91H73qwqPG3fu+j6Or8k13tGRBwpqFPBBQknEhLayogayslp2/OvlxCIa7L8T+G899FLHhfp9eDqRomLoE7zti45YYumHq3y5atG5yzXmpV/MROz26WeLm2lltLYYQjlr6PBZyh8o7zBd8V9wqjmrdh617wlwYLs2dYHx4Yf9AIMAZpcPO+XxMbYpiDq945QXYg0oN2Tpn5MBsUhnhhpWs3Us3s5ltqRleDV3beHBuMuNf3bV7koJIeV8UICYpqxMJ0mG0MdBjRTei2ZsxAE4jsuHb/GBVSfA1bzlFXjOn6Y7T9xFSZMOuGQ4+x1Dgbd+fw+G3M1IWWNZnuIF7al1wJZy/0B0FxvioAEEMMJMXN2SRO9GRlzipl1ux0aVYpT6wjIBvgYTXPanV11A73lBayvStdUHAYiFqTnvsI="
  # CODECLIMATE_REPO_TOKEN_MASTER=[secure]
  - secure: "PlSdyahabTK2OmDjDYPtiKFhzkSBiwG6XWxNz/In2dL6X6MIgzpm8XqBgRbMHtDjNxhL+RG+RKUjN+8sTG5nlkx4N8EjuKwocA6d/itI53LXpjqmZCxJMLpLkGxH8qC+2QFiIRQCevYV7r+kRmN9Pf6avtOwSmqez07JWnWBRho9bw3c2uZCI+Jgi3PU3WYe8LRTs6LfrNc4GIxf4YipY6WMRo8ZJ9ifAlzUBo5eOQHSyabxZWllEfTAYIqmjalMGPbI1A0Gxnup22HLwuuY8yYzP2jyYe8kMWAhB8tcxlRDSKq1dU7SCAmJ1UsmoE3LlAGsaB6cihEasIiIGBWgPWmOSQ17ILdh7Ii/dCrUB5WioJADuV30QB49Iawfuz6dx5RC5tuDRaKcVBwnOc1EqIOCahgqipgXy4Vlf+K21c9T6yisFPv/2InlIkYCx6jshkXN7zPKhF8JuGumg62nIfoMERHDX/DP0hTRsYK9gU86LsdcyorgF2GmbMeftY9dPIJ5LtcwNXsY4asxQkaNtfNYDhZFcvNIvAi+nxW5aFODKXdwIrkXKBOPWAiBs98mMY3FJyItYAte29fxpAIdgl7CNTwvg3RU1kFlJQ40X8ygHPERgd6vEAIL9ooOGAOrh79HVk9aNmqU5eVvKFmL+Vx0NNB4JXE4TzQbDCa5sLs="
  # CODECLIMATE_REPO_TOKEN_DEV=[secure]
  - secure: "mkXV5yKdfAoS4DP1E+DRp5H5rU6ncuPsV1Nk42MQTrVtwOCKNRKH057WEZrnuW6nSJNMu8MwaIdc3UaeWbkVFUPcqDgaVdksa7s1+0+vu9yDqoEvPHMaWD6t3Up+OUQwpFJvvCtwDm7LVszEihcws5tCV6nNB/qW182x/ZT+jS/JIbJABKYnq1k/dZfD4B+YmSG4lWZY0EH2VbASootEYeyvaZuvsV/PLMI+c0cOtMKFa2M9pzh0UlIzqGrBkLG+3mBBZ94gcyBSUoIkYf1NnhcAIGWwRGfx/26RHDrUkfYkHQdjmU+ldW+rheu2v+9mOUWqvQm4lycUJf+bcU6VGbAM3olElTSLYI9GD0VhvHP5eItdNVaq6zN71m5c7tDku0DgKMYWQM550j6xiOUQKUFuxjHkBwar+3o8ubYnUtzacWtN9mNByCIlP8P870enFsjGpbkAxMUFsV6Z3B4VQFa2MBnYMTTDQzwDPqA9DNJdJ6dDO0wB7GxdqOtKb16S/SK5yIZiGoynWoplcxjSky9LiokVLJaboCWCWLM42+VQd+Oam6qfj8Yq+N/9wALjfpQWyTvwOb6V4v9S54ZAjf2AVML0o8SI7wHsJZFTVHG0vGnZpmjRe6GpqT3tcm1bJGh+5jovbyhaot0ANSjOqMX0GS4GkGbFafg4gGtx390="
  # AWS_ACCESS_KEY_ID=[secure]
  - secure: "CXi3PSfPL9kEcjxr0YtHmmu8KfAS9fNemVmgLgqdnBAK1zbAr8yeRpvq+f/XBAOBNfK3ysSTSc3jbnuSgybfK3LsG0QeEdEo2jlbfF6zm64PorIGR9B0MGU4tBAl6PGRDLjuWEEi4SnezSCoH3MS7iR9R1O0TUotJV1hhXQHgxeh954KCwubeF0cAQV1WmlLgCWsybXLLYdKBOMa8kcbvv7fZ376S7h7KV5Nx4Uu36Rz4E3VWh7dbIDqp9BH5A5KGBtAJ5TJhkBdquvLPyFKRWLSnF62TXNE6Pcd3jzfUaaeMUBSEsaFcRZ5fRobzMqRJ09VPXsNoK4HGQpEzIQS9Rp4C2St7ZyDeYz0SH98yvYctHHsVevaLXw/l/385XG602dUNZIUIGQpZlPi4LC2vBCbIJke3ECaiVbZ4uSn8MUZ5dVx2nKeQUjw2a0ZoV+w4HFxWVvQH/EzhTuDSXZDivlDFboY6sTgAehY24rOf3OXq7DTlOcpHQCONGMwM3jPQq20+BzTrvinNjK0q0M9q6brrIXr/6AJqIwORN8cmZl+bEzRHALtErbGo0ZraSCJTag0UlKs366I03zoguuhwARMU6oEHrstklGu/DtHGFc40WlFxhdI3mUJnOhlE/fZxs1CEWTfY0pHiRblfe3087mOPW/5soBgrwN20CypXSk="
  # AWS_SECRET_ACCESS_KEY=[secure]
  - secure: "rgO6EHqk5URpgN8pah3hvzviKy9FdWxqOmQ02zMBQBceDFB5ZBOFh/WqOA4QssFf/hDuF7uCW0fXGTW0iC+jaHnvWP8BxsVsEVbLcUtdwE5bxyyMjtMHqPzmTtg5OQjpFRZWLfDzuqV//nDMR/HOlDIsfLRHfb8UBlRoEdinqxYevljAprTDKDik/6h7VKCqieavdUGOiegHC9kNNRE/z0m0Vs5hUZ7I/H3KCfquiPh2bDj5BksawQdR+AMFJkg40O5dG/PVOvizUE5XQZEnTrJGrAVfCkhYLNU6b0fZ0wRznwajGPbCR0Ui8rH8nn/bMrsN3E6DYNmohWtzxKIEK+Jp5EhzXyobJzrCGCurMk5MrqcR1E7+W7/c5XPfdS9bdjHuiYO0ccht9Wf8MNGl9NDxeSDpui+qaHhpU1vv87OgBrPL69XrKL4DFiSi28euvBsRY3TTX0nDy8ntzyVjmez0DrP1VX4AQv3RV68aZeslE6M7xXCJXj3i5DWPqxDuXQjSYCc+1piFs197e6xE0/qtVqwE7eJAsZLAZc/xOtKnBxnvv3wePDO8sX5rGL8gcMWZKhtcL61pN7qFrYmzJxaYFhq6GeFZCRNF7Vk34VgVNaf39Y6VIA8YwqPwDzoxeS/scoi6kKnCr7Wl2A5OnDjeawxzP/luIpkFam+NgJQ="
  # AWS_DEFAULT_REGION=[secure]
  - secure: "G/VxG9TjCQptDvt/pPU01iObn/QRaael/4Jteq1x+OTy3SDUAioGC/+pJ+Y9szLznKhySo3CxxA2fjKLUtwyir3QlHhEnoSywKiHsTu4oymUye3VXdW9YFcveRosYYYkF/VaoVjJmbtA5rT9VfGbWeXivaF4x5/a51I7XPWpKbGj9tIDlJjkhlf8m286XWA0NBpDTcnioZ7SnD6AdONgx8JeewxT6mLCi+KJOZwIG6bbSEDc7uYP7ouSB83Ecs+y77PnT5EJTCfMfY5z1XzA7wh+uIx/i55P0+P5sDkXF+fp4vq7kzj1B7N0aa4Gzqr/Sz75KiWNqdN7avhdQmeDiB8IKZpiQl/Q85BsuQ6Yzb5u5HWwVwaEhWqwiesnrM9e4218YNYgmZy0vML9jEQr7nHTHn47NVbZhn0FT2NH0vVX03lL5a0MhD+GiNEngMyprM3BFlP2oxmWsGo9197zozH/5BTVkNLP3KSm4nEy8JStqIE04vYAiBNtJwPIFXD+7E9PYfijGuEVXCCKJd5N6yPsvA0xOZuSZiEZkYcnAAv/2h+kNr1prNfTOrDQomGnrcPKuTN0r5FMhAdaahaGICyFVdMgCHSYxBvV0VwrLTCmviRQMjYmolZBKdeePMJMNBCMApVEI0X4LacZ77MZUlnyxVc67tIIdJrCb93Cy30="
  # AWS_S3_BUCKET=[secure]
  - secure: "aBdPFDcBOYCcW6XgQKrBYzanZhdzyjVJId4G4lPyJwA8e6wShSkqmMxH5Ov06jVkkxrUPYsLNmIjhMUk7SCmmxSactHPl5RH/D2HSn8hw1qwsRuu/EFc9okIDSnSkARCrD0RrtYf8a4X4Q5MsDA0tXSKmeO0yEa4d6ZB0Wv218+LL3u0UPTZ7aVsLxIyRu/2vlCBUK7hRODIQOj0A7jA7XI2t+jwJrGMZRYNNdFQHq/7pBOOyTOvpWFhNDr9wDH6nNdZ8oYzeXcyHCk/RRjF9S6o1XvRIaRinkchMDiao/E2QszCj7JJjdxJApGPglxPtDZ9yfwQjZdZ9PqZhNXyYw67T+S4W7rn0sxTVcMDzCvRxOqHIKOZKaKFXdQlitWTEIiK8eIMtowdVZqNoTIHoZams/L0FxF4gs+sqpcfB7aBrzFY/ETbfaPZe2oSNzHbQhffQBVOh3DIaHTQ4Sb/+anAVUadDW36LYvv8GMur4/w7lGKcbGguLnLUxIo4nH51PWwXsKfOxsWZoxGQlRW8iqFgc1J7pxjFccIKk8KP1d4gZa/LHHIh6Mw0CEC/1L9lhQaZ53fENQh9Q2sXioo+AR6vcN6KtfuIPXb01XiKo4hwsxghouDa81FDv2o7jBjt0D7ZDSt1isw8ZNIxZgKYLaHIqGufupL1wIbrjRRcUY="
  matrix:
  - TEST_SUITE=backend
  - TEST_SUITE=frontend
notifications:
  slack:
    secure: "oatTaVfw4yZ0GuPLCjDF5gnQuW6BPOZt7ClkaQ95cb3hKOkU9efwLA0cuKXQTCI4/o5Ub10daNRByDqHY6AVhEXTR/slmsK9+k2KUYz9YJ4UfRhGGuUcGW4BKBLmxfqh9XTJx3YQoBg1FViUlNTNiUQ2u1OvHyS7i2EoepplJjeKemrwbFk1JwhQc+KweQ/Lb8Uk9ngQKTwQ25AZ5mHzvbksReK34lvkDiKJiE88R28DInvZdaJpg92V4wKMFFMKiw+Yqgv4rX5mm/FJ2L8ekt3qVUeIKuie46ipvbQOL7CjEP2/JV2x24RgKukZmJ0DBx0uhDdtlhNtYLY0IJKRZGkY75b1m5LHyLf1ETq3KLdt5COBob41zt6PA7fsaYJcFId2VONR+9RYXVilEDIdVwymUVETGAxSLf89z2dTo5Uz/cy5+/MuoizOVqfVwjRmSFuUSlipuVbhf9cp5arwQOaE9XO89IrGJfPVZ0oHutzvSRqdS+KBdAFw8nmK8ff40Zogdhu9QprzecBnxAiDlqiKWPF0afZ4UAt6DhhJ8q+9rHv85mW9Kik7/NRoiSESX63p9YRAqLpPWtComNKIYLtQ0wtJ/0Yn7XACBPfZKvNFLSzmzcnMG4eom+YELESvvoRqm3viX4oStnUT3i3f2BrUU5TVGdi0xz8J0BRBmMs="
